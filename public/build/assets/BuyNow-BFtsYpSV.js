import{_ as R,l as E,m as G,u as U,p as z,q as te,r as w,i as q,y as T,c as d,o as r,a as e,k as $,f as v,t,e as u,F as N,g as L,h as A,K as M,L as K,n as V,a6 as se,d as oe,b as ae,w as X,a2 as I,T as ne}from"./app-Bl5ehUwr.js";import{_ as le,r as re}from"./OrderConfirmModal-CV1S0Le1.js";import{r as ie,_ as de}from"./ToastSuccessMessage-CiNTeRAj.js";import{_ as F}from"./LoadingSpin-DO2qCNP8.js";import{u as ce,_ as ue}from"./CheckoutShippingAddress-BIxTm8sa.js";import{_ as me}from"./VerifyOtpModal-B-LtUTC0.js";import{r as pe}from"./TrashIcon-C-HQ67KY.js";import{r as _e}from"./ChevronDownIcon-CE28jq38.js";import"./AddressForm-B4ZnDTlH.js";import"./AddressFormModal-vamdzXnB.js";import"./SkeletonLoader-CAfuKt9m.js";const he={class:"p-6 bg-white rounded-2xl border border-slate-200"},fe={class:"text-slate-950 text-xl font-medium leading-7"},ye={class:"my-4 flex justify-between gap-4"},ve={class:"text-slate-950 text-base font-normal leading-normal"},be={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},xe={class:"text-red-500 text-base font-normal leading-normal"},we={class:"text-slate-950 text-base font-normal leading-normal"},$e={class:"my-4 flex justify-between gap-4"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Pe={class:"my-4 flex justify-between gap-4"},Me={class:"text-slate-950 text-base font-normal leading-normal"},Ne={class:"text-slate-950 text-base font-normal leading-normal"},Se={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},De={class:"text-sm sm:text-base font-medium mb-2"},je={class:"space-y-2"},Be={class:"font-medium"},Oe={class:"font-medium"},Ae={class:"mt-4 p-3 bg-slate-200 rounded-lg"},Ie={class:"text-sm sm:text-base font-medium"},Te={class:"text-base font-bold"},Ve={class:"my-4 flex justify-between gap-4"},Ge={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ue={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},ze={key:1,class:"p-4 mt-6 bg-slate-100 rounded-xl"},Le={class:"text-black text-base font-normal leading-normal"},We={class:"relative mt-2"},He=["placeholder"],Xe={class:"absolute top-1/2 -translate-y-1/2 left-3"},Fe={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},Re={class:"animated-text"},Ee={key:1,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},qe={key:1,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Ke={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(B){const C=new E,n=G(),l=U(),y=z(),c=ce(),p=te(),o=w(!1),i=w(""),b=w(!1),h=B,a=w({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});q(()=>{i.value=n.coupon_code,n.isLoadingCart||m()}),T(()=>n.isLoadingCart,()=>{n.isLoadingCart||m()});const m=()=>{axios.post("/cart/checkout",{shop_ids:[n.buyNowShopId],is_buy_now:!0,coupon_code:i.value},{headers:{Authorization:y.token,"X-Guest-Token":y.access_token,Currency_Id:l.selectedCurrency.id}}).then(s=>{a.value=s.data.data.checkout,n.buyNowProduct=s.data.data.checkout_items[0],o.value=s.data.data.apply_coupon,o.value&&i.value.length>0?(p.success(s.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code=i.value):!o.value&&i.value.length>0&&(p.error(s.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code="")}).catch(s=>{p.error(s.response.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"})})},O=()=>{i.value.length>0&&m()},f=()=>{i.value="",o.value=!1,n.coupon_code="",m()},S={component:de,props:{title:"Order Placed",message:"Your order has been placed successfully."}},k=w(!1),Y=()=>{if(!n.address){p.error("Please select shipping address");return}if(h.paymentMethod==null||h.paymentMethod=="card"){p.error("Please select payment method",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"});return}n.buyNowProduct?(k.value=!0,axios.post("/place-order",{currency_id:l.selectedCurrency.id,shop_ids:[n.buyNowShopId],address_id:n.address.id,payment_method:h.paymentMethod,coupon_code:i.value,note:h.note,is_buy_now:!0},{headers:{Authorization:y.token,"X-Guest-Token":y.access_token}}).then(s=>{k.value=!1,p(S,{type:"default",hideProgressBar:!0,icon:!1,position:l.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value.total_amount=0,a.value.delivery_charge=0,a.value.coupon_discount=0,a.value.payable_amount=0,n.buyNowProduct=null,n.coupon_code="";let _=s.data.data.order_payment_url;if(_!=null){W(_);return}else n.showOrderConfirmModal=!0}).catch(s=>{p.error(s.response.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.value=!1})):p.error("Please select at least one product",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"})},J=()=>{if(h.paymentMethod==null||h.paymentMethod=="card"){p.error("Please select payment method",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"});return}n.buyNowProduct?(k.value=!0,axios.post("/place-order",{currency_id:l.selectedCurrency.id,shop_ids:[n.buyNowShopId],payment_method:h.paymentMethod,coupon_code:i.value,note:h.note,is_buy_now:!0,name:c.name,email:c.email,country:c.country,phone_code:c.phone_code,phone:c.phone,area:c.area,flat_no:c.flat_no,post_code:c.post_code,address_line:c.address_line,address_line2:c.address_line2,address_type:c.address_type,langitude:c.langitude,longitude:c.longitude},{headers:{Authorization:y.token,"X-Guest-Token":y.access_token}}).then(s=>{k.value=!1,p(S,{type:"default",hideProgressBar:!0,icon:!1,position:l.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value.total_amount=0,a.value.delivery_charge=0,a.value.coupon_discount=0,a.value.payable_amount=0,n.buyNowProduct=null,c.clearGuestAddress(),n.coupon_code="";let _=s.data.data.order_payment_url;if(_!=null){W(_);return}else n.showOrderConfirmModal=!0}).catch(s=>{c.errors=s.response.data.errors,p.error(s.response.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.value=!1})):p.error("Please select at least one product",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"})},W=s=>{let _=700,P=700,D=screen.width/2-_/2,x=screen.height/2-P/2,Q="popup,resizable,height="+P+",width="+_+",top="+x+",left="+D,g=window.open(s,null,Q);g.title="Payment Window Screen - Make Payment",g.onload=()=>{g.title="Payment Window Screen - Make Payment"},g.focus();var j=setInterval(Z,1e3);function Z(){try{if(g.closed||!g){clearInterval(j),g.close(),n.orderPaymentCancelModal=!0,p.error("Payment Canceled",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),C.push({name:"home"});return}var H=g.location.pathname.replace(/\/order\/\d+/,"");if(H=="/payment/cancel"){clearInterval(j),setTimeout(()=>{g.close(),n.orderPaymentCancelModal=!0,p.error("Sorry! Payment Canceled",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),C.push({name:"home"})},8e3);return}if(H=="/payment/success"){g.close(),clearInterval(j),n.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(j),g.close()},18e4)};return(s,_)=>{var P,D;return r(),d("div",null,[e("div",he,[e("div",fe,t(s.$t("Order Summary")),1),e("div",ye,[e("div",ve,t(s.$t("Subtotal")),1),e("div",be,t(u(l).showCurrency(a.value.total_amount)),1)]),e("div",ge,[e("div",xe,t(s.$t("Discount")),1),e("div",we," -"+t(u(l).showCurrency(a.value.coupon_discount)),1)]),_[3]||(_[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",$e,[e("div",ke,t(s.$t("Subtotal After Discount")),1),e("div",Ce,t(u(l).showCurrency((a.value.total_amount-a.value.coupon_discount).toFixed(2))),1)]),e("div",Pe,[e("div",Me,t(s.$t("Shipping Charge")),1),e("div",Ne,t(u(l).showCurrency(a.value.delivery_charge)),1)]),((P=a.value.all_vat_taxes)==null?void 0:P.length)>0||a.value.order_tax_amount>0?(r(),d("div",Se,[e("h2",De,t(s.$t("VAT & Taxes Summary")),1),e("div",je,[(r(!0),d(N,null,L(a.value.all_vat_taxes,x=>(r(),d("div",{key:x.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",Be,[A(t(x.name)+" ",1),e("small",null,"("+t(x.percentage)+"%)",1)]),e("span",Oe,t(u(l).showCurrency(x.amount)),1)]))),128))]),e("div",Ae,[e("h3",Ie,t(s.$t("Total Tax Amount"))+": ",1),e("p",Te,t(u(l).showCurrency(a.value.order_tax_amount)),1)])])):$("",!0),_[4]||(_[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Ve,[e("div",Ge,t(s.$t("Total Payable")),1),e("div",Ue,t(u(l).showCurrency(a.value.payable_amount)),1)]),u(y).user?(r(),d("div",ze,[e("div",Le,t(s.$t("Have a coupon"))+"? ",1),e("div",We,[M(e("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=x=>i.value=x),class:V(["formInputCoupon pr-14 p-3",o.value?"text-green-500 pl-10":""]),placeholder:s.$t("Enter coupon code")},null,10,He),[[K,i.value]]),o.value?(r(),d("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:f},[v(u(pe),{class:"w-6 h-6 text-red-500"})])):(r(),d("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:O},[v(u(se),{class:"w-6 h-6 text-white"})])),e("span",Xe,[o.value?(r(),oe(u(ie),{key:0,class:"w-6 h-6 text-green-500"})):$("",!0)])])])):$("",!0)]),!((D=u(y).user)!=null&&D.account_verified)&&u(l).orderPlaceAccountVerify?(r(),d("div",Fe,[e("span",Re,t(s.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:_[1]||(_[1]=x=>b.value=!0)},t(s.$t("Verify Now")),1)])):$("",!0),u(y).user?(r(),d(N,{key:1},[k.value?(r(),d("button",Ee,[A(t(s.$t("Processing"))+" ",1),v(F)])):(r(),d("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:Y},t(s.$t("Place Order")),1))],64)):(r(),d(N,{key:2},[k.value?(r(),d("button",qe,[A(t(s.$t("Processing"))+" ",1),v(F)])):(r(),d("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:J},t(s.$t("Place Order")),1))],64)),v(le),v(me,{showModal:b.value,onHideModal:_[2]||(_[2]=x=>b.value=!1)},null,8,["showModal"])])}}},Ye=R(Ke,[["__scopeId","data-v-3d2a4527"]]),Je={class:"space-y-4 mt-3 transition duration-300"},Qe={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},Ze={key:0,class:"text-slate-950 text-base font-medium leading-normal"},et={class:"space-y-2 divide-y divide-slate-200"},tt={class:"w-[72px] h-[95px]"},st=["src"],ot={class:"flex flex-col gap-1 w-full"},at={class:"text-primary text-xs font-normal leading-none"},nt={class:"text-slate-950 text-base font-normal leading-normal"},lt={class:"flex flex-wrap justify-between items-center gap-3"},rt={class:"flex items-center gap-1"},it={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},dt={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ct={class:"text-slate-800 text-base font-normal leading-normal"},ut={__name:"BuyNowCheckoutProduct",setup(B){z();const C=U(),n=G();return(l,y)=>{var c,p;return r(),d("div",Je,[e("div",Qe,[u(C).multiVendor?(r(),d("div",Ze,t((c=u(n).buyNowProduct)==null?void 0:c.shop_name),1)):$("",!0),e("div",et,[(r(!0),d(N,null,L((p=u(n).buyNowProduct)==null?void 0:p.products,o=>{var i,b;return r(),d("div",{key:o.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",tt,[e("img",{src:o.thumbnail,class:"w-full h-full object-contain"},null,8,st)]),e("div",ot,[e("div",at,t(o==null?void 0:o.brand),1),e("div",nt,t(o==null?void 0:o.name),1),e("div",lt,[e("div",rt,[e("div",it,t((i=o==null?void 0:o.size)==null?void 0:i.name),1),e("div",dt,t((b=o==null?void 0:o.color)==null?void 0:b.name),1)]),e("div",ct," 1 X "+t(u(C).showCurrency((o==null?void 0:o.discount_price)>0?o==null?void 0:o.discount_price:o==null?void 0:o.price)),1)])])])}),128))])])])}}},mt={class:"main-container"},pt={class:"flex items-center gap-2 overflow-hidden pt-4"},_t={class:"grow w-full overflow-hidden"},ht={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},ft={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},yt={class:"col-span-1 xl:col-span-2"},vt={class:"flex gap-2 justify-between items-center"},bt={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},gt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},xt={key:0},wt={class:"mt-6"},$t={class:"mb-1"},kt={class:"text-slate-950 text-xl font-medium leading-7"},Ct={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},Pt=["placeholder"],Mt={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},Nt={class:"text-slate-950 text-xl font-medium leading-7"},St={class:"mt-4 flex flex-wrap gap-4"},Dt={key:0,for:"cash",class:"flex items-center gap-4 xl:min-w-80"},jt={class:"text-slate-500 text-base font-normal leading-normal"},Bt={key:1,for:"card",class:"flex items-center gap-4 xl:min-w-80"},Ot={class:"text-slate-500 text-base font-normal leading-normal"},At={key:0,class:"mt-5 border-t border-slate-200"},It={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},Tt={class:"mt-3 flex flex-wrap gap-4"},Vt=["for"],Gt=["id","value"],Ut={class:""},zt=["src"],Lt={__name:"BuyNow",setup(B){const C=new E,n=z(),l=U(),y=G(),c=w(!0),p=w(""),o=l.cashOnDelivery?"cash":"card",i=w(o),b=w(null),h=w(null);return q(()=>{window.scrollTo(0,0),y.coupon_code="",b.value=i.value,!n.user&&!n.access_token&&C.push({name:"home"})}),T(i,()=>{i.value==="card"?b.value=h.value:b.value=i.value}),T(h,()=>{i.value==="card"&&(b.value=h.value)}),(a,m)=>{const O=ae("router-link");return r(),d("div",mt,[e("div",pt,[v(O,{to:"/",class:"w-6 h-6"},{default:X(()=>[v(u(re),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",_t,[e("div",ht,[e("span",null,t(a.$t("Home")),1),m[5]||(m[5]=e("span",null,"/",-1)),e("span",null,t(a.$t("Cart")),1),m[6]||(m[6]=e("span",null,"/",-1)),e("span",null,t(a.$t("Checkout")),1)])])]),e("div",ft,[e("div",yt,[e("div",{class:V(["py-4 border-b tran",c.value?"border-primary":"border-slate-200"])},[e("div",vt,[e("div",bt,t(a.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:m[0]||(m[0]=f=>c.value=!c.value)},[e("div",gt," ("+t(u(y).buyNowProduct?1:0)+" "+t(a.$t("items"))+") ",1),v(u(_e),{class:V(["w-5 h-5 text-primary-600 transition duration-300",c.value?"rotate-180":""])},null,8,["class"])])]),c.value?(r(),d("div",xt,[v(ut)])):$("",!0)],2),v(ue),e("div",wt,[e("div",$t,[e("span",kt,t(a.$t("Note")),1),e("span",Ct," ("+t(a.$t("Optional"))+") ",1)]),M(e("textarea",{"onUpdate:modelValue":m[1]||(m[1]=f=>p.value=f),rows:"3",class:"form-input",placeholder:a.$t("Write your note here")+"..."},null,8,Pt),[[K,p.value]])]),e("div",Mt,[e("div",Nt,t(a.$t("Payment Method")),1),e("div",St,[u(l).cashOnDelivery?(r(),d("label",Dt,[M(e("input",{"onUpdate:modelValue":m[2]||(m[2]=f=>i.value=f),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[I,i.value]]),m[7]||(m[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",jt,t(a.$t("Cash on delivery")),1)])):$("",!0),u(l).onlinePayment?(r(),d("label",Bt,[M(e("input",{"onUpdate:modelValue":m[3]||(m[3]=f=>i.value=f),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[I,i.value]]),m[8]||(m[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",Ot,t(a.$t("Credit or Debit Card")),1)])):$("",!0)]),v(ne,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:X(()=>[i.value==="card"?(r(),d("div",At,[e("span",It,t(a.$t("Available Payment Gateways")),1),e("div",Tt,[(r(!0),d(N,null,L(u(l).paymentGateways,f=>(r(),d("label",{key:f.id,for:f.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[M(e("input",{"onUpdate:modelValue":m[4]||(m[4]=S=>h.value=S),id:f.name,name:"paymentGateway",type:"radio",class:"sr-only",value:f.name},null,8,Gt),[[I,h.value]]),e("div",Ut,[e("img",{src:f.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,zt)])],8,Vt))),128))])])):$("",!0)]),_:1})])]),v(Ye,{note:p.value,paymentMethod:b.value},null,8,["note","paymentMethod"])])])}}},Zt=R(Lt,[["__scopeId","data-v-54712930"]]);export{Zt as default};
