import{_ as R,l as q,m as B,u as N,p as U,q as ee,r as $,i as E,c as i,o as r,a as e,k,f as v,t as s,e as n,F as C,g as j,h as T,K as M,L as K,n as G,a6 as te,d as se,y as X,b as oe,w as F,a2 as V,T as ae}from"./app-Bl5ehUwr.js";import{_ as ne,r as le}from"./OrderConfirmModal-CV1S0Le1.js";import{r as re,_ as ie}from"./ToastSuccessMessage-CiNTeRAj.js";import{_ as L}from"./LoadingSpin-DO2qCNP8.js";import{u as de,_ as ce}from"./CheckoutShippingAddress-BIxTm8sa.js";import{_ as ue}from"./VerifyOtpModal-B-LtUTC0.js";import{r as me}from"./TrashIcon-C-HQ67KY.js";import{r as pe}from"./ChevronDownIcon-CE28jq38.js";import"./AddressForm-B4ZnDTlH.js";import"./AddressFormModal-vamdzXnB.js";import"./SkeletonLoader-CAfuKt9m.js";const he={class:"p-6 bg-white rounded-2xl border border-slate-200"},_e={class:"text-slate-950 text-xl font-medium leading-7"},fe={class:"my-4 flex justify-between gap-4"},ye={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},be={class:"text-red-500 text-base font-normal leading-normal"},xe={class:"text-slate-950 text-base font-normal leading-normal"},we={class:"my-4 flex justify-between gap-4"},$e={class:"text-slate-950 text-base font-normal leading-normal"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"my-4 flex justify-between gap-4"},Pe={class:"text-slate-950 text-base font-normal leading-normal"},Me={class:"text-slate-950 text-base font-normal leading-normal"},De={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},Se={class:"text-sm sm:text-base font-medium mb-2"},Ae={class:"space-y-2"},je={class:"font-medium"},Ie={class:"font-medium"},Oe={class:"mt-4 p-3 bg-slate-200 rounded-lg"},Te={class:"text-sm sm:text-base font-medium"},Ve={class:"text-base font-bold"},Ge={class:"my-4 flex justify-between gap-4"},Be={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ne={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ue={key:1,class:"p-4 mt-6 bg-slate-100 rounded-xl"},ze={class:"text-black text-base font-normal leading-normal"},We={class:"relative mt-2"},He=["placeholder"],Xe={class:"absolute top-1/2 -translate-y-1/2 left-3"},Fe={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},Le={class:"animated-text"},Re={key:1,type:"button",class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},qe={key:1,type:"button",class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Ee={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(I){const b=new q,t=B(),a=N(),h=U(),d=de(),l=ee(),g=$(!1),c=$(""),w=$(!1),_=I;E(()=>{c.value=t.coupon_code});const f=()=>{c.value.length>0&&W()},m=()=>{c.value="",g.value=!1,t.coupon_code="",W()},D={component:ie,props:{title:"Order Placed",message:"Your order has been placed successfully."}},u=$(!1),O=()=>{if(!t.address){l.error("Please select shipping address",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"});return}if(_.paymentMethod==null||_.paymentMethod=="card"){l.error("Please select payment method",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"});return}t.checkoutProducts.length>0?(u.value=!0,axios.post("/place-order",{currency_id:a.selectedCurrency.id,shop_ids:t.selectedShopIds,address_id:t.address.id,payment_method:_.paymentMethod,coupon_code:c.value,note:_.note},{headers:{Authorization:h.token,"X-Guest-Token":h.access_token}}).then(o=>{t.checkoutProducts=[],t.selectedShopIds=[],t.coupon_code="",t.total_amount=0,t.delivery_charge=0,t.coupon_discount=0,t.payable_amount=0,h.access_token=null,u.value=!1,t.fetchCart(),l(D,{type:"default",hideProgressBar:!0,icon:!1,position:a.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let p=o.data.data.order_payment_url;if(p!=null){z(p);return}else t.showOrderConfirmModal=!0}).catch(o=>{l.error(o.response.data.message,{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),u.value=!1})):l.error("Please select at least one product",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"})},Y=()=>{if(_.paymentMethod==null||_.paymentMethod=="card"){l.error("Please select payment method",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"});return}t.checkoutProducts.length>0?(u.value=!0,axios.post("/place-order",{currency_id:a.selectedCurrency.id,shop_ids:t.selectedShopIds,name:d.name,email:d.email,country:d.country,phone_code:d.phone_code,phone:d.phone,area:d.area,flat_no:d.flat_no,post_code:d.post_code,address_line:d.address_line,address_line2:d.address_line2,address_type:d.address_type,langitude:d.langitude,longitude:d.longitude,payment_method:_.paymentMethod,coupon_code:c.value,note:_.note},{headers:{Authorization:h.token,"X-Guest-Token":h.access_token}}).then(o=>{t.checkoutProducts=[],d.clearGuestAddress(),t.coupon_code="",t.total_amount=0,t.delivery_charge=0,t.coupon_discount=0,t.payable_amount=0,h.access_token=null,u.value=!1,t.fetchCart(),l(D,{type:"default",hideProgressBar:!0,icon:!1,position:a.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let p=o.data.data.order_payment_url;if(p!=null){z(p);return}else t.showOrderConfirmModal=!0}).catch(o=>{d.errors=o.response.data.errors,l.error(o.response.data.message,{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),u.value=!1})):l.error("Please select at least one product",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"})},z=o=>{let p=700,P=700,S=screen.width/2-p/2,x=screen.height/2-P/2,J="popup,resizable,height="+P+",width="+p+",top="+x+",left="+S,y=window.open(o,null,J);if(y.title="Payment Window Screen - Make Payment",y.onload=()=>{y.title="Payment Window Screen - Make Payment",y.closed&&console.log("close window")},y.focus(),y.closed){l.error("Payment Canceled",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var A=setInterval(Q,1e3);function Q(){try{if(y.closed||!y){clearInterval(A),y.close(),t.orderPaymentCancelModal=!0,l.error("Payment Canceled",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"});return}var H=y.location.pathname.replace(/\/order\/\d+/,"");if(H=="/payment/cancel"){clearInterval(A),setTimeout(()=>{y.close(),t.orderPaymentCancelModal=!0,l.error("Payment Canceled",{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),b.push({name:"home"})},8e3);return}if(H=="/payment/success"){y.close(),clearInterval(A),t.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(A),y.close()},18e4)},W=()=>{axios.post("/cart/checkout",{shop_ids:t.selectedShopIds,coupon_code:c.value},{headers:{Authorization:h.token,"X-Guest-Token":h.access_token,Currency_Id:a.selectedCurrency.id}}).then(o=>{g.value=o.data.data.apply_coupon,t.total_amount=o.data.data.checkout.total_amount,t.delivery_charge=o.data.data.checkout.delivery_charge,t.coupon_discount=o.data.data.checkout.coupon_discount,t.payable_amount=o.data.data.checkout.payable_amount,g.value?(l.success(o.data.message,{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),t.coupon_code=c.value):(l.error(o.data.message,{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"}),t.coupon_code="")}).catch(o=>{l.error(o.response.data.message,{position:a.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(o,p)=>{var P,S;return r(),i("div",null,[e("div",he,[e("div",_e,s(o.$t("Order Summary")),1),e("div",fe,[e("div",ye,s(o.$t("Subtotal")),1),e("div",ve,s(n(a).showCurrency(n(t).total_amount)),1)]),e("div",ge,[e("div",be,s(o.$t("Discount")),1),e("div",xe," -"+s(n(a).showCurrency(n(t).coupon_discount)),1)]),p[3]||(p[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",we,[e("div",$e,s(o.$t("Subtotal After Discount")),1),e("div",ke,s(n(a).showCurrency((n(t).total_amount-n(t).coupon_discount).toFixed(2))),1)]),e("div",Ce,[e("div",Pe,s(o.$t("Shipping Charge")),1),e("div",Me,s(n(a).showCurrency(n(t).delivery_charge)),1)]),((P=n(t).all_vat_taxes)==null?void 0:P.length)>0||n(t).order_tax_amount>0?(r(),i("div",De,[e("h2",Se,s(o.$t("VAT & Taxes Summary")),1),e("div",Ae,[(r(!0),i(C,null,j(n(t).all_vat_taxes,x=>(r(),i("div",{key:x.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",je,[T(s(x.name)+" ",1),e("small",null,"("+s(x.percentage)+"%)",1)]),e("span",Ie,s(n(a).showCurrency(x.amount)),1)]))),128))]),e("div",Oe,[e("h3",Te,s(o.$t("Total Tax Amount"))+": ",1),e("p",Ve,s(n(a).showCurrency(n(t).order_tax_amount)),1)])])):k("",!0),p[4]||(p[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Ge,[e("div",Be,s(o.$t("Total Payable")),1),e("div",Ne,s(n(a).showCurrency(n(t).payable_amount)),1)]),n(h).user?(r(),i("div",Ue,[e("div",ze,s(o.$t("Have a coupon"))+"? ",1),e("div",We,[M(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=x=>c.value=x),class:G(["formInputCoupon pr-14 p-3",g.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,He),[[K,c.value]]),g.value?(r(),i("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:m},[v(n(me),{class:"w-6 h-6 text-red-500"})])):(r(),i("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:f},[v(n(te),{class:"w-6 h-6 text-white"})])),e("span",Xe,[g.value?(r(),se(n(re),{key:0,class:"w-6 h-6 text-green-500"})):k("",!0)])])])):k("",!0)]),!((S=n(h).user)!=null&&S.account_verified)&&n(a).orderPlaceAccountVerify?(r(),i("div",Fe,[e("span",Le,s(o.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:p[1]||(p[1]=x=>w.value=!0)},s(o.$t("Verify Now")),1)])):k("",!0),n(h).user?(r(),i(C,{key:1},[u.value?(r(),i("button",Re,[T(s(o.$t("Processing"))+" ",1),v(L)])):(r(),i("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:O},s(o.$t("Place Order")),1))],64)):(r(),i(C,{key:2},[u.value?(r(),i("button",qe,[T(s(o.$t("Processing"))+" ",1),v(L)])):(r(),i("button",{key:0,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:Y},s(o.$t("Place Order")),1))],64)),v(ne),v(ue,{showModal:w.value,onHideModal:p[2]||(p[2]=x=>w.value=!1)},null,8,["showModal"])])}}},Ke=R(Ee,[["__scopeId","data-v-aab561ea"]]),Ye={class:"space-y-4 mt-3 transition duration-300"},Je={class:"text-slate-950 text-base font-medium leading-normal"},Qe={class:"space-y-2 divide-y divide-slate-200"},Ze={class:"w-[72px] h-[95px]"},et=["src"],tt={class:"flex flex-col gap-1 w-full"},st={class:"text-primary text-xs font-normal leading-none"},ot={class:"text-slate-950 text-base font-normal leading-normal"},at={class:"flex flex-wrap justify-between items-center gap-3"},nt={class:"flex items-center gap-1"},lt={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},rt={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},it={class:"text-slate-800 text-base font-normal leading-normal"},dt={__name:"checkoutProducts",setup(I){U();const b=N(),t=B();return(a,h)=>(r(),i("div",Ye,[(r(!0),i(C,null,j(n(t).checkoutProducts,d=>(r(),i("div",{key:d.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[e("div",Je,s(d.shop_name),1),e("div",Qe,[(r(!0),i(C,null,j(d.products,l=>{var g,c;return r(),i("div",{key:l.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Ze,[e("img",{src:l.thumbnail,class:"w-full h-full object-contain"},null,8,et)]),e("div",tt,[e("div",st,s(l.brand),1),e("div",ot,s(l.name),1),e("div",at,[e("div",nt,[e("div",lt,s((g=l.size)==null?void 0:g.name),1),e("div",rt,s((c=l.color)==null?void 0:c.name),1)]),e("div",it,s(l.quantity)+" X "+s(n(b).showCurrency(l.discount_price>0?l.discount_price:l.price)),1)])])])}),128))])]))),128))]))}},ct={class:"main-container"},ut={class:"flex items-center gap-2 overflow-hidden pt-4"},mt={class:"grow w-full overflow-hidden"},pt={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},ht={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},_t={class:"col-span-1 xl:col-span-2"},ft={class:"flex gap-2 justify-between items-center"},yt={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},vt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},gt={key:0},bt={class:"mt-6"},xt={class:"mb-1"},wt={class:"text-slate-950 text-xl font-medium leading-7"},$t={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},kt=["placeholder"],Ct={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},Pt={class:"text-slate-950 text-xl font-medium leading-7"},Mt={class:"mt-4 flex flex-wrap gap-4"},Dt={key:0,for:"cash",class:"flex items-center gap-4 xl:min-w-80"},St={class:"text-slate-500 text-base font-normal leading-normal"},At={key:1,for:"card",class:"flex items-center gap-4 xl:min-w-80"},jt={class:"text-slate-500 text-base font-normal leading-normal"},It={key:0,class:"mt-5 border-t border-slate-200"},Ot={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},Tt={class:"mt-3 flex flex-wrap gap-4"},Vt=["for"],Gt=["id","value"],Bt={class:""},Nt=["src"],Ut={__name:"Checkout",setup(I){const b=U(),t=new q,a=N(),h=B(),d=$(!1),l=$(""),g=a.cashOnDelivery?"cash":"card",c=$(g),w=$(null),_=$(null);return E(()=>{window.scrollTo(0,0),h.coupon_code="",w.value=c.value,!b.user&&!b.access_token&&t.push({name:"home"}),b.showAddressModal=!1,b.showChangeAddressModal=!1}),X(c,()=>{c.value==="card"?w.value=_.value:w.value=c.value}),X(_,()=>{c.value==="card"&&(w.value=_.value)}),(f,m)=>{const D=oe("router-link");return r(),i("div",ct,[e("div",ut,[v(D,{to:"/",class:"w-6 h-6"},{default:F(()=>[v(n(le),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",mt,[e("div",pt,[e("span",null,s(f.$t("Home")),1),m[5]||(m[5]=e("span",null,"/",-1)),e("span",null,s(f.$t("Cart")),1),m[6]||(m[6]=e("span",null,"/",-1)),e("span",null,s(f.$t("Checkout")),1)])])]),e("div",ht,[e("div",_t,[e("div",{class:G(["py-4 border-b tran",d.value?"border-primary":"border-slate-200"])},[e("div",ft,[e("div",yt,s(f.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:m[0]||(m[0]=u=>d.value=!d.value)},[e("div",vt," ("+s(n(h).checkoutTotalItems)+" "+s(f.$t("items"))+") ",1),v(n(pe),{class:G(["w-5 h-5 text-primary-600 transition duration-300",d.value?"rotate-180":""])},null,8,["class"])])]),d.value?(r(),i("div",gt,[v(dt)])):k("",!0)],2),v(ce),e("div",bt,[e("div",xt,[e("span",wt,s(f.$t("Note")),1),e("span",$t," ("+s(f.$t("Optional"))+") ",1)]),M(e("textarea",{"onUpdate:modelValue":m[1]||(m[1]=u=>l.value=u),rows:"3",class:"form-input",placeholder:f.$t("Write your note")+"..."},null,8,kt),[[K,l.value]])]),e("div",Ct,[e("div",Pt,s(f.$t("Payment Method")),1),e("div",Mt,[n(a).cashOnDelivery?(r(),i("label",Dt,[M(e("input",{"onUpdate:modelValue":m[2]||(m[2]=u=>c.value=u),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[V,c.value]]),m[7]||(m[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",St,s(f.$t("Cash on delivery")),1)])):k("",!0),n(a).onlinePayment?(r(),i("label",At,[M(e("input",{"onUpdate:modelValue":m[3]||(m[3]=u=>c.value=u),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[V,c.value]]),m[8]||(m[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",jt,s(f.$t("Credit or Debit Card")),1)])):k("",!0)]),v(ae,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[c.value==="card"?(r(),i("div",It,[e("span",Ot,s(f.$t("Available Payment Gateways")),1),e("div",Tt,[(r(!0),i(C,null,j(n(a).paymentGateways,u=>(r(),i("label",{key:u.id,for:u.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[M(e("input",{"onUpdate:modelValue":m[4]||(m[4]=O=>_.value=O),id:u.name,name:"paymentGateway",type:"radio",class:"sr-only",value:u.name},null,8,Gt),[[V,_.value]]),e("div",Bt,[e("img",{src:u.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,Nt)])],8,Vt))),128))])])):k("",!0)]),_:1})])]),v(Ke,{note:l.value,paymentMethod:w.value},null,8,["note","paymentMethod"])])])}}},Jt=R(Ut,[["__scopeId","data-v-224896e5"]]);export{Jt as default};
